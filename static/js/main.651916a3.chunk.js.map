{"version":3,"sources":["components/SampleImages.js","components/LutImages.js","store.js","localStorage.js","routes/Home.js","routes/Gallery.js","App.js","index.js"],"names":["SampleImages","id","name","url","LutImages","persistedState","serializedState","localStorage","getItem","console","log","src","srcname","lut","lutname","JSON","parse","err","loadState","imgManager","createSlice","initialState","reducers","selectSrc","state","action","payload","value","label","selectLut","actions","configureStore","reducer","selectMapper","obj","rObj","imgList","map","lutList","connect","imgManagerSt","dispatch","ownProps","SrcReducer","LutReducer","errMsgEl","useRef","resultAreaEl","imgSelectEl","canvasAreaEl","srcCanvasEl","resultCanvasEl","lutCanvasEl","dropboxEl","lutboxEl","dropmsgEl","lutmsgEl","useState","opacity","setOpacity","lutName","sourceImage","document","createElement","lutImage","imageDataWrapper","imageData","imageDataWrapper3","imageData3","c","ctx","c2","ctx2","lutCanvas","lutCanvasContext","dropbox","dropmsg","lutbox","lutmsg","resultArea","errMSG","dragenter","e","stopPropagation","preventDefault","dragover","drop","files","dataTransfer","blobUrl","window","URL","createObjectURL","filename","innerText","handleFiles","lutdrop","handleLutFiles","openLut","crossOrigin","onload","processImage","onerror","style","backgroundColor","width","height","drawImage","getImageData","data","length","lutOpacity","i","r","Math","floor","g","b","lutX","lutIndex","putImageData","originalImg","Image","resultImg","convertCanvasToImage","lutTitle","createTextNode","concat","lutBtn","divEl","appendChild","canvas","image","toDataURL","useEffect","current","getContext","color","addEventListener","className","htmlFor","options","ref","onChange","event","formatLabel","minValue","maxValue","step","onClick","lastChild","removeChild","App","path","exact","component","Home","Gallery","store","subscribe","stringify","setItem","saveState","getState","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.651916a3.chunk.js","sourcesContent":["const SampleImages = [\n  { id: 1, name: \"color chart\", url: \"https://i.imgur.com/BlUVaOM.jpg\" },\n  {\n    id: 2,\n    name: \"day2\",\n    url:\n      \"http://drive.google.com/uc?export=view&id=1CQAQAb9fW9DaZtt8AWqLmg4XhlTiLV8B\",\n  },\n  {\n    id: 3,\n    name: \"day3\",\n    url:\n      \"http://drive.google.com/uc?export=view&id=11vhz8udKE0VXkufLK9o1NjMIKPrLtkpb\",\n  },\n];\n\nexport default SampleImages;\n","const LutImages = [\n  {\n    id: 1,\n    name: \"joyful1\",\n    url:\n      \"https://drive.google.com/uc?export=view&id=1Iw1gRnInNBNc-qsWIefZFPQ2DWepVWZV\",\n  },\n  {\n    id: 2,\n    name: \"joyful2\",\n    url:\n      \"https://drive.google.com/uc?export=view&id=1vUSyMblGqxjMALYXVNJjddAJGfWqIs0f\",\n  },\n  {\n    id: 3,\n    name: \"joyful3\",\n    url:\n      \"https://drive.google.com/uc?export=view&id=1-nyJ_PBgsnkx5l4Mj8XXraQE8l0PLl0C\",\n  },\n  {\n    id: 4,\n    name: \"anime\",\n    url: \"https://i.imgur.com/yKpfItb.jpg\",\n  },\n];\n\nexport default LutImages;\n","import { configureStore, createSlice } from \"@reduxjs/toolkit\";\nimport { loadState } from \"./localStorage\";\n\nconst persistedState = loadState();\n\nconst imgManager = createSlice({\n  name: \"imgManager\",\n  initialState: persistedState,\n  reducers: {\n    selectSrc: (state, action) => {\n      return {\n        src: action.payload.value,\n        srcname: action.payload.label,\n        lut: state.lut,\n        lutname: state.lutname,\n      };\n    },\n    selectLut: (state, action) => {\n      return {\n        src: state.src,\n        srcname: state.srcname,\n        lut: action.payload.value,\n        lutname: action.payload.label,\n      };\n    },\n  },\n});\n\nexport const { selectSrc, selectLut } = imgManager.actions;\n\nexport default configureStore({ reducer: imgManager.reducer });\n","export const loadState = () => {\n  try {\n    const serializedState = localStorage.getItem(\"state\");\n    console.log(\"firstload: \", serializedState);\n    if (serializedState === null) {\n      return {\n        src: \"https://i.imgur.com/BlUVaOM.jpg\",\n        srcname: \"Sample\",\n        lut: \"https://i.imgur.com/yKpfItb.jpg\",\n        lutname: \"testLUT\",\n      };\n    }\n    return JSON.parse(serializedState);\n  } catch (err) {\n    return undefined;\n  }\n};\n\nexport const saveState = (state) => {\n  try {\n    const serializedState = JSON.stringify(state);\n    console.log(\"saved state :\", serializedState);\n    localStorage.setItem(\"state\", serializedState);\n  } catch (err) {\n    console.log(\"write error :\");\n  }\n};\n","import React, { useState, useRef, useEffect } from \"react\";\n\nimport Select from \"react-select\";\nimport { connect } from \"react-redux\";\nimport \"./Home.css\";\nimport SampleImages from \"../components/SampleImages\";\nimport LutImages from \"../components/LutImages\";\nimport { selectSrc, selectLut } from \"../store\";\nimport InputRange from \"react-input-range\";\n\nfunction selectMapper(obj) {\n  let rObj = {};\n  rObj.value = obj.url;\n  rObj.label = obj.name;\n  return rObj;\n}\n\nconst imgList = SampleImages.map((obj) => selectMapper(obj));\nconst lutList = LutImages.map((obj) => selectMapper(obj));\n\n// imgMananerSt : 이미지 관리 스테이트 , SrcReducer / LutReducer > 스토어 리듀서로 보내는 연결 함수\nfunction Home({ imgManagerSt, SrcReducer, LutReducer }) {\n  const errMsgEl = useRef();\n  const resultAreaEl = useRef();\n  const imgSelectEl = useRef();\n  const canvasAreaEl = useRef();\n  const srcCanvasEl = useRef();\n  const resultCanvasEl = useRef();\n  const lutCanvasEl = useRef();\n  const dropboxEl = useRef();\n  const lutboxEl = useRef();\n  const dropmsgEl = useRef();\n  const lutmsgEl = useRef();\n\n  const [opacity, setOpacity] = useState(70); // InputRange Initial Value\n\n  console.log(\"imgManagerSt: \", imgManagerSt);\n  console.log(\"imgManagerSt.src: \", imgManagerSt.src);\n  console.log(\"imgManagerSt.lut: \", imgManagerSt.lut);\n\n  // const source = {\n  //   src: \"https://i.imgur.com/BlUVaOM.jpg\",\n  //   lut: \"https://i.imgur.com/yKpfItb.jpg\",\n  // };\n  const onChange = (event) => {\n    console.log(\"event: \", event);\n    SrcReducer(event);\n  };\n  const onLutChange = (event) => {\n    LutReducer(event);\n  };\n\n  let lutName = \"default\";\n\n  let sourceImage = document.createElement(\"img\");\n  let lutImage = document.createElement(\"img\");\n\n  let imageDataWrapper = null;\n  let imageData = null;\n  let imageDataWrapper3 = null;\n  let imageData3 = null;\n\n  // 캔버스 초기화\n  let c = null;\n  let ctx = null;\n  let c2 = null;\n  let ctx2 = null;\n  let lutCanvas = null;\n  let lutCanvasContext = null;\n\n  // 파일 드롭 영역 초기화\n  let dropbox = null;\n  let dropmsg = null;\n  let lutbox = null;\n  let lutmsg = null;\n\n  let resultArea = null;\n  let errMSG = null;\n\n  useEffect(() => {\n    c = srcCanvasEl.current;\n    if (c) {\n      ctx = c.getContext(\"2d\");\n    }\n    c2 = resultCanvasEl.current;\n    if (c2) {\n      ctx2 = c2.getContext(\"2d\");\n    }\n    lutCanvas = lutCanvasEl.current;\n    if (lutCanvas) {\n      lutCanvasContext = lutCanvas.getContext(\"2d\");\n    }\n    errMSG = errMsgEl.current;\n    errMSG.style.backgroundColor = \"#006B54\";\n    errMSG.style.color = \"white\";\n\n    dropbox = dropboxEl.current;\n    dropbox.addEventListener(\"dragenter\", dragenter, false);\n    dropbox.addEventListener(\"dragover\", dragover, false);\n    dropbox.addEventListener(\"drop\", drop, false);\n\n    dropmsg = dropmsgEl.current;\n\n    lutbox = lutboxEl.current;\n    lutbox.addEventListener(\"dragenter\", dragenter, false);\n    lutbox.addEventListener(\"dragover\", dragover, false);\n    lutbox.addEventListener(\"drop\", lutdrop, false);\n\n    lutmsg = lutmsgEl.current;\n\n    resultArea = resultAreaEl.current;\n  });\n\n  function dragenter(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function dragover(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n  function drop(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const dt = e.dataTransfer;\n    const files = dt.files;\n    console.log(files);\n    handleFiles(files);\n  }\n\n  function lutdrop(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const dt = e.dataTransfer;\n    const files = dt.files;\n    console.log(files);\n    handleLutFiles(files);\n  }\n\n  function handleFiles(files) {\n    console.log(\"handleFiles\");\n    const blobUrl = window.URL.createObjectURL(files[0]);\n    console.log(\"filename:\", files[0].name);\n    var filename = files[0].name;\n    dropmsg.innerText = filename;\n    const dropFile = {\n      value: blobUrl,\n      label: filename,\n    };\n\n    SrcReducer(dropFile);\n  }\n  function handleLutFiles(files) {\n    const blobUrl = window.URL.createObjectURL(files[0]);\n    console.log(\"filename:\", files[0].name);\n    var filename = files[0].name;\n    lutmsg.innerText = filename;\n    const dropFile = {\n      value: blobUrl,\n      label: filename,\n    };\n    lutName = filename;\n\n    LutReducer(dropFile);\n  }\n\n  function openLut() {\n    lutImage.src = imgManagerSt.lut; //LUT URL\n    lutImage.crossOrigin = \"Anonymous\";\n\n    console.log(\"LUT loaded!\");\n    lutImage.onload = openSource();\n    lutImage.onerror = () => {\n      errMSG.innerText = \"Error occured loading LUT\";\n      errMSG.style.backgroundColor = \"red\";\n    };\n  }\n\n  function openSource() {\n    sourceImage.onload = processImage;\n    sourceImage.onerror = () => {\n      errMSG.innerText = \"Error occured loading image\";\n      errMSG.style.backgroundColor = \"red\";\n    };\n    sourceImage.src = imgManagerSt.src; // IMAGE URL\n\n    sourceImage.crossOrigin = \"Anonymous\";\n\n    console.log(\"Source loaded!\");\n  }\n\n  function processImage() {\n    c.width = c2.width = sourceImage.width;\n    c.height = c2.height = sourceImage.height;\n\n    lutCanvas.width = lutImage.width;\n    lutCanvas.height = lutImage.height;\n    if (lutCanvas.width === 0) {\n      console.log(\"lut loading error\");\n      errMSG.innerText = \"LUT is not loaded! Try again!\";\n      errMSG.style.backgroundColor = \"red\";\n      return;\n    }\n\n    ctx.drawImage(sourceImage, 0, 0);\n    try {\n      imageDataWrapper = ctx.getImageData(0, 0, c.width, c.height);\n    } catch (err) {\n      console.log(err);\n      errMSG.innerText = err;\n      errMSG.style.backgroundColor = \"red\";\n    }\n    imageData = imageDataWrapper.data;\n    console.log(imageData.length / 4);\n\n    lutCanvasContext.drawImage(lutImage, 0, 0);\n    // this error occurs wrong result!!\n    try {\n      imageDataWrapper3 = lutCanvasContext.getImageData(\n        0,\n        0,\n        lutCanvas.width,\n        lutCanvas.height\n      );\n    } catch (err) {\n      console.log(err);\n      errMSG.innerText = err;\n      errMSG.style.backgroundColor = \"red\";\n    }\n\n    imageData3 = imageDataWrapper3.data;\n    let lutOpacity = opacity / 100;\n    console.log(lutOpacity);\n\n    for (var i = 0; i < imageData.length; i += 4) {\n      //console.log(\"rendering...\");\n      var r = Math.floor(imageData[i] / 4);\n      var g = Math.floor(imageData[i + 1] / 4);\n      var b = Math.floor(imageData[i + 2] / 4);\n      var lutX = (b % 8) * 64 + r;\n      var lutY = Math.floor(b / 8) * 64 + g;\n      var lutIndex = (lutY * 512 + lutX) * 4;\n\n      imageData[i] =\n        imageData3[lutIndex] * lutOpacity + imageData[i] * (1 - lutOpacity);\n      imageData[i + 1] =\n        imageData3[lutIndex + 1] * lutOpacity +\n        imageData[i + 1] * (1 - lutOpacity);\n      imageData[i + 2] =\n        imageData3[lutIndex + 2] * lutOpacity +\n        imageData[i + 2] * (1 - lutOpacity);\n    }\n    //complete and refresh UI\n    ctx2.putImageData(imageDataWrapper, 0, 0);\n    console.log(\"processing Done!\");\n    errMSG.innerText = \"Processing Completed!\";\n    errMSG.style.backgroundColor = \"grey\";\n    canvasResizer();\n    var originalImg = new Image();\n    var resultImg = new Image();\n    originalImg = convertCanvasToImage(c);\n    resultImg = convertCanvasToImage(c2);\n    originalImg.style.width = \"50%\";\n    resultImg.style.width = \"50%\";\n\n    var lutTitle = document.createTextNode(lutName.concat(\" : \", opacity, \"%\"));\n    var lutBtn = document.createElement(\"button\");\n    var divEl = document.createElement(\"div\");\n    lutBtn.appendChild(lutTitle);\n\n    resultArea.appendChild(lutBtn);\n    resultArea.appendChild(divEl);\n    resultArea.appendChild(originalImg);\n    resultArea.appendChild(resultImg);\n  }\n\n  function onUndo() {\n    if (resultArea.lastChild) {\n      resultArea.removeChild(resultArea.lastChild);\n      resultArea.removeChild(resultArea.lastChild);\n      resultArea.removeChild(resultArea.lastChild);\n      resultArea.removeChild(resultArea.lastChild);\n    } else {\n      console.log(\"Nothing to Undo\");\n      errMSG.innerText = \"Nothing to Undo.\";\n      errMSG.style.backgroundColor = \"orange\";\n    }\n  }\n\n  function canvasResizer() {\n    console.log(\"resized!\");\n    c.style.width = c2.style.width = \"50%\";\n    //c.style.height = c2.style.height = \"600px\";\n    console.log(c.style.width);\n  }\n\n  function convertCanvasToImage(canvas) {\n    var image = new Image();\n    image.src = canvas.toDataURL(\"image/jpeg\");\n    return image;\n  }\n\n  function onClick(event) {\n    errMsgEl.current.innerText = \"Processing...\";\n    errMsgEl.current.style.backgroundColor = \"#006B54\";\n\n    openLut();\n  }\n\n  return (\n    <>\n      <div className=\"title\">3D LUT React App</div>\n      <div className=\"selector selector--src\">\n        <label className=\"label label--selector\" htmlFor=\"imgs\">\n          Choose a Sample\n        </label>\n        <Select\n          options={imgList}\n          ref={imgSelectEl}\n          onChange={onChange}\n          id=\"imgs\"\n        />\n      </div>\n      <div className=\"selector selector--lut\">\n        <label className=\"label label--selector\" htmlFor=\"luts\">\n          Choose a LUT\n        </label>\n        <Select options={lutList} id=\"luts\" onChange={onLutChange} />\n      </div>\n      <div id=\"dropbox\" ref={dropboxEl}>\n        <h2>\n          <div id=\"dropmsg\" ref={dropmsgEl}>\n            Drag and Drop Image File HERE! <br />*<br />*<br />*<br />*<br />\n            Image DropZone\n            <br />\n          </div>\n        </h2>\n      </div>\n      <div id=\"lutbox\" ref={lutboxEl}>\n        <h2>\n          <div id=\"lutmsg\" ref={lutmsgEl}>\n            Drag and Drop LUT File HERE! <br />*<br />*<br />*<br />*<br />\n            LUT DropZone\n            <br />\n          </div>\n        </h2>\n      </div>\n      <form className=\"form\">\n        <label>[ LUT Opacity ]</label>\n        <InputRange\n          formatLabel={(opacity) => `${opacity} %`}\n          minValue={0}\n          maxValue={100}\n          step={5}\n          value={opacity}\n          onChange={(opacity) => {\n            setOpacity(opacity);\n          }}\n        />\n      </form>\n      <div ref={errMsgEl} id=\"errMSG\">\n        Ready...\n      </div>\n      <button onClick={onClick}>Apply LUT</button>{\" \"}\n      <button onClick={onUndo}>Undo</button>\n      <div ref={canvasAreaEl} id=\"canvasArea\" className=\"canvas fixedcanvas\">\n        <canvas ref={srcCanvasEl} id=\"srcCanvas\" />\n        <canvas ref={resultCanvasEl} id=\"resultCanvas\" />\n        <canvas ref={lutCanvasEl} id=\"lutCanvas\" />\n      </div>\n      <div ref={resultAreaEl} id=\"resultArea\" />\n    </>\n  );\n}\n\n// store 에서 statue 받아서 props 로 넘겨주는 함수\nfunction mapStateToProps(state) {\n  return { imgManagerSt: state };\n}\n\nfunction mapDispatchToProps(dispatch, ownProps) {\n  return {\n    SrcReducer: (value) => dispatch(selectSrc(value, ownProps)),\n    LutReducer: (value) => dispatch(selectLut(value, ownProps)),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Home);\n","export default () => \"Gallery\";\n","import React from \"react\";\nimport { HashRouter as Router, Route } from \"react-router-dom\";\nimport Home from \"./routes/Home\";\nimport Gallery from \"./routes/Gallery\";\n\nfunction App() {\n  return (\n    <Router>\n      <Route path=\"/\" exact component={Home}></Route>\n      <Route path=\"/:id\" exact component={Gallery}></Route>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport { saveState } from \"./localStorage\";\n\nstore.subscribe(() => {\n  saveState(store.getState());\n  console.log(\"store updated: \", store.getState());\n});\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}